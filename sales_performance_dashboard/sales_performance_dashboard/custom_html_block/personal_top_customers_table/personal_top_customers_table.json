{
 "doctype": "Custom HTML Block",
 "name": "Personal Top Customers Table",
 "module": "Sales Performance Dashboard",
 "private": 0,
 "html": "<div class=\"psd-top-customer-card\"><div class=\"psd-top-customer-header\">Personal Top Customers</div><div class=\"psd-top-customer-sub\">Top customers by billed amount</div><div class=\"psd-top-customer-wrap\"><table class=\"psd-top-customer-table\"><thead><tr><th style=\"width:70px\">#</th><th>Customer</th><th style=\"text-align:right\">Amount</th></tr></thead><tbody class=\"psd-top-customer-body\"><tr><td colspan=\"3\" class=\"psd-top-customer-empty\">Loading...</td></tr></tbody><tfoot><tr><th colspan=\"2\">Total</th><th class=\"psd-top-customer-total\">-</th></tr></tfoot></table></div></div>",
 "script": "const method = \"sales_performance_dashboard.sales_performance_dashboard.dashboard_chart_source.personal_top_customers.personal_top_customers.get_table_data_for_custom\";\nconst body = root_element.querySelector('.psd-top-customer-body');\nconst totalEl = root_element.querySelector('.psd-top-customer-total');\n\nfunction money(value) {\n\treturn format_currency(value || 0);\n}\n\nfrappe.call({ method }).then((r) => {\n\tconst payload = r.message || {};\n\tconst rows = payload.rows || [];\n\tconst total = payload.total || 0;\n\n\tif (!rows.length) {\n\t\tbody.innerHTML = '<tr><td colspan=\"3\" class=\"psd-top-customer-empty\">No data available</td></tr>';\n\t\ttotalEl.textContent = money(0);\n\t\treturn;\n\t}\n\n\tbody.innerHTML = rows\n\t\t.map((row) => `<tr><td>${row.rank}</td><td>${frappe.utils.escape_html(row.customer || '')}</td><td style=\\\"text-align:right\\\">${money(row.amount)}</td></tr>`)\n\t\t.join('');\n\ttotalEl.textContent = money(total);\n});\n",
 "style": ".psd-top-customer-card{position:relative;background:#fff;border:1px solid var(--gray-200);border-radius:14px;padding:14px 14px 10px;box-shadow:0 3px 14px rgba(15,23,42,.05)}.psd-top-customer-header{font-size:16px;font-weight:700;margin-bottom:2px}.psd-top-customer-sub{color:var(--text-muted);font-size:11px;margin-bottom:8px}.psd-top-customer-wrap{overflow:auto;max-height:420px}.psd-top-customer-table{width:100%;border-collapse:collapse;font-size:12px}.psd-top-customer-table th,.psd-top-customer-table td{padding:8px 10px;border-bottom:1px solid var(--gray-100)}.psd-top-customer-table thead th{position:sticky;top:0;background:#fff;z-index:1}.psd-top-customer-table tfoot th{background:#fafafa;font-weight:700}.psd-top-customer-empty{text-align:center;color:var(--text-muted);padding:16px}"
}
